<!DOCTYPE html>
<html  xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>公告管理</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="robots" content="all,follow">
    <!-- Bootstrap CSS-->
    <link rel="stylesheet" href="../static/vendor/bootstrap/css/bootstrap.min.css">
    <!-- Font Awesome CSS-->
    <link rel="stylesheet" href="../static/vendor/font-awesome/css/font-awesome.min.css">
    <!-- Fontastic Custom icon font-->
    <link rel="stylesheet" href="../static/css/fontastic.css">
    <!-- Google fonts - Poppins -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Poppins:300,400,700">
    <!-- theme stylesheet-->
    <link rel="stylesheet" href="../static/css/style.default.css" id="theme-stylesheet">
    <!-- Custom stylesheet - for your changes-->
    <link rel="stylesheet" href="../static/css/custom.css">
    <!-- Favicon-->
    <link rel="shortcut icon" href="../static/img/favicon.ico">
    <!-- Tweaks for older IEs--><!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script><![endif]-->
    <style>
        .button-color:hover{
            background-color: #796aee;
            color: #ffffff;
        }
        .button-color{
            color: #6c757d;
        }
    </style>
</head>
<body>
<div class="page">
    <!-- Main Navbar-->
    <header th:replace="header::header"></header>
    <div class="page-content d-flex align-items-stretch">
        <nav class="side-navbar" th:fragment="navbar">
            <!-- Sidebar Header-->
            <div class="sidebar-header d-flex align-items-center">
                <div class="avatar"><img src="../static/img/pikaqiu.jpg" alt="..." class="img-fluid rounded-circle"></div>
                <div class="title">
                    <h1 class="h4">Monkey_jie</h1>
                    <p>管理员</p>
                </div>
            </div>
            <!-- Sidebar Navidation Menus--><span class="heading">主目录</span>
            <ul class="list-unstyled">
                <li><a href="/admin"> <i class="icon-home"></i>主界面 </a></li>
                <li class="active"><a href="/announce"> <i class="icon-padnote"></i>公告栏 </a></li>
                <li><a href="#exampledropdownDropdown" aria-expanded="false" data-toggle="collapse"> <i class="icon-interface-windows"></i>表格 </a>
                    <ul id="exampledropdownDropdown" class="collapse list-unstyled ">
                        <li><a href="/table1">会员信息</a></li>
                        <li><a href="/table2">比赛报名</a></li>
                        <li><a href="/table3">招新报名</a></li>
                    </ul>
                </li>
            </ul>
        </nav>
        <div class="content-inner">
            <!-- Page Header-->
            <header class="page-header">
                <div class="container-fluid">
                    <h2 class="no-margin-bottom">公告管理栏</h2>
                </div>
            </header>
            <!-- Breadcrumb-->
            <div class="breadcrumb-holder container-fluid">
                <ul class="breadcrumb">
                    <li class="breadcrumb-item"><a href="/admin">主界面</a></li>
                    <li class="breadcrumb-item">公告栏 </li>
                </ul>
            </div>
            <!-- Forms Section-->
            <div class="row">
                <div class="col-lg-12">
                    <div class="card">
                        <div class="card-close">
                            <div class="dropdown">
                                <button type="button" id="closeCard3" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle"><i class="fa fa-ellipsis-v"></i></button>
                                <div aria-labelledby="closeCard3" class="dropdown-menu dropdown-menu-right has-shadow">
                                    <a href="#" class="dropdown-item"> <i class="fa fa-mail-forward"></i>导出</a>
                                    <a href="/form" class="dropdown-item"> <i class="fa fa-plus"></i>增加</a>
                                    <button onclick="DelSelect()" class="dropdown-item button-color"><i class="fa fa-times"></i>&nbsp;&nbsp;&nbsp;删除</button>
                                </div>
                            </div>
                        </div>
                        <div class="card-header d-flex align-items-center">
                            <h3 class="h4">公告内容管理</h3>
                        </div>
                        <div class="card-body">
                            <div class="table-responsive">
                                <table class="table table-striped table-hover">
                                    <thead>
                                    <tr>
                                        <th><input type="checkbox" id="allChecks"  onclick="ckAll()" /></th>
                                        <th>#</th>
                                        <th>时间</th>
                                        <th>内容</th>
                                        <th>编辑</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <tr th:each="page:${pages.list}">
                                        <td style="CURSOR: hand; HEIGHT: 22px" align="center" width="10"><input type="checkbox" th:value="${page.id}" id="check" value="" name="check"> </td>
                                        <td th:text="${page.id}"></td>
                                        <td th:text="${page.date}"></td>
                                        <td th:text="${page.content}"></td>
                                        <td><a th:href="@{/editContent(id=${page.id})}">编辑</a></td>
                                    </tr>
                                    </tbody>
                                </table>
                                <!--实现分页,page.pageNum是当前页数，page.pages是总页数-->
                                <div>
                                    <a th:href="@{/announce(start = 1)}">首页</a>
                                    <a th:href="@{/announce(start = ${pages.pageNum - 1})}">上一页</a>
                                    <a th:href="@{/announce(start = ${pages.pageNum + 1})}">下一页</a>
                                    <a th:href="@{/announce(start = ${pages.pages})}">尾页</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Page Footer-->
            <footer th:replace="footer::footer"></footer>
        </div>
    </div>
</div>
<!-- JavaScript files-->
<script>
    //全选
    function ckAll(){
        var flag=document.getElementById("allChecks").checked;
        var cks=document.getElementsByName("check");
        for(var i = 0;i<cks.length;i++){
            cks[i].checked=flag;
        }
    }

    //批量删除
    function DelSelect() {
        var Checkbox = false;
        $("input[name='check']").each(function() {
            if (this.checked == true) {
                Checkbox = true;
            }
        });
        if (Checkbox) {
            var t = confirm("您确认要删除选中的内容吗？");
            if (t == false) {
                return false;
            } else {
                var checkedID="";
                $("input[name='check']").each(function() {
                    if (this.checked == true) {
                        checkedID += this.value + ",";

                    }
                });
                checkedID = checkedID.substring(0,checkedID.length-1);
                window.location.replace("/deleteContent?id="+checkedID);
            }
        } else {
            alert("请选择您要删除的内容!");
            return false;
        }
    }
</script>
<script src="../static/vendor/jquery/jquery.min.js"></script>
<script src="../static/vendor/popper.js/umd/popper.min.js"> </script>
<script src="../static/vendor/bootstrap/js/bootstrap.min.js"></script>
<script src="../static/vendor/jquery.cookie/jquery.cookie.js"> </script>
<script src="../static/vendor/chart.js/Chart.min.js"></script>
<script src="../static/vendor/jquery-validation/jquery.validate.min.js"></script>
<!-- Main File-->
<script src="../static/js/front.js"></script>
</body>
</html>