<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>约球管理</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="robots" content="all,follow">
    <!-- Bootstrap CSS-->
    <link rel="stylesheet" href="https://cdn.bootcss.com/twitter-bootstrap/4.3.0/css/bootstrap.min.css">
    <!-- Font Awesome CSS-->
    <link rel="stylesheet" href="../../static/vendor/font-awesome/css/font-awesome.min.css">
    <!-- Fontastic Custom icon font-->
    <link rel="stylesheet" href="../../static/css/fontastic.css">
    <!-- Google fonts - Poppins -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Poppins:300,400,700">
    <!-- theme stylesheet-->
    <link rel="stylesheet" href="http://cdn.jie12366.xyz/style.default.css" id="theme-stylesheet">
    <!-- Favicon-->
    <link rel="shortcut icon" href="../../static/img/favicon.ico">
    <style>
        .button-color:hover {
            background-color: #796aee;
            color: #ffffff;
        }

        .button-color {
            color: #6c757d;
        }

        .img-size {
            width: 60px;
        }
        .data-pos{
            color: #796aee;
            text-align: center;
            font-size: 1.3rem;
            margin-left: 2rem;
        }
    </style>
</head>
<body>
<div class="page">
    <!-- Main Navbar-->
    <header th:replace="header::header"></header>
    <div class="page-content d-flex align-items-stretch">
        <nav th:replace="navbar2::navbar2"></nav>
        <div class="content-inner">
            <!-- Page Header-->
            <header class="page-header">
                <div class="container-fluid">
                    <h2 class="no-margin-bottom">约球管理栏</h2>
                </div>
            </header>
            <!-- Breadcrumb-->
            <div class="breadcrumb-holder container-fluid">
                <ul class="breadcrumb">
                    <li class="breadcrumb-item"><a href="/admin/index">主界面</a></li>
                    <li class="breadcrumb-item">约球管理</li>
                </ul>
            </div>
            <div class="main">
                <div style="width: 90%;text-align: center;margin-top: 20px;margin-bottom: 20px;">
                    <button type="button" class="btn btn-info" onclick="startOrder()" style="margin-right: 20px;">开始约球</button>
                    <button type="button" class="btn btn-primary" onclick="endOrder()" style="margin-left: 20px;">结束约球</button>
                </div>
                <div>
                    <table style="width: 90%;margin: auto" class="table table-hover table-bordered table-striped" id="orderList">
                        <tr>
                            <td></td>
                        </tr>
                    </table>
                </div>
            </div>
            <!-- Page Footer-->
            <footer th:replace="footer::footer"></footer>
        </div>
    </div>
</div>
<!-- JavaScript files-->
<script>
    window.onload = function () {
        getList()
    }

    function getList() {
        $.ajax({
            url: '/order/lastList',
            type: 'get',
            dataType: 'json',
            async: true,
            success:function(res){
                if (res.status == 200){
                    console.log(res.data)
                    var table = "";
                    table += "<tr>" + "<td colspan='4' style='text-align: center'>" + "按优先级排序的约球列表" + "</td>" +"</tr>"
                    for (var i = 0;i< res.data.length;i++){
                        table += "<tr>" + "<td>" + Number(i) + Number(1) + "</td>"
                            + "<td>" + res.data[i].name + "</td>"
                            + "<td>" + res.data[i].account + "</td>"
                            + "<td>" + res.data[i].stuClass + "</td>"
                            + "</tr>"
                    }
                    document.getElementById("orderList").innerHTML = table
                }
            },
            error:function(){
                status = false;
                // return false;
            }
        });
    }

    function startOrder() {
        $.ajax({
            url: '/start/order',
            type: 'get',
            dataType: 'json',
            async: true,
            success:function(data){
                if (data.status == 200){
                    alert("约球已开始")
                }
            },
            error:function(){
                status = false;
                // return false;
            }
        });
    }

    function endOrder() {
        $.ajax({
            url: '/stop/order',
            type: 'get',
            dataType: 'json',
            async: true,
            success:function(data){
                if (data.status == 200){
                    alert("已结束约球")
                }
            },
            error:function(){
                status = false;
                // return false;
            }
        });
    }
</script>
<!-- JavaScript files-->
<script src="../../static/js/page-cut.js"></script>
<script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>
<script src="https://cdn.bootcss.com/twitter-bootstrap/4.3.0/js/bootstrap.min.js"></script>
<script src="../../static/js/front.js"></script>
</body>
</html>